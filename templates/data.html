<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="/static/css/styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedoedAI - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</title>
    
    <script>
        async function postJSON(url, body) {
            const resp = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body || {}) });
            return await resp.json();
        }
        async function downloadBTC() {
            const s = document.getElementById('status'); s.className='status info'; s.style.display='block'; s.textContent='‚è≥ –°–∫–∞—á–∏–≤–∞—é BTCUSDT...';
            try { const r = await postJSON('/parser', { symbol: 'BTCUSDT' }); s.className = r.status ? 'status success' : 'status error'; s.textContent = (r.status || 'error') + ': ' + ((r.results||[]).map(x=>x.message).join(' | ')||''); } catch(e){ s.className='status error'; s.textContent='‚ùå –û—à–∏–±–∫–∞: '+e.message; }
        }
        async function downloadXMR() {
            const s = document.getElementById('status'); s.className='status info'; s.style.display='block'; s.textContent='‚è≥ –°–∫–∞—á–∏–≤–∞—é XMRUSDT...';
            try { const r = await postJSON('/parser_xmr', {}); s.className = r.status ? 'status success' : 'status error'; s.textContent = (r.status || 'error') + ': ' + ((r.results||[]).map(x=>x.message).join(' | ')||''); } catch(e){ s.className='status error'; s.textContent='‚ùå –û—à–∏–±–∫–∞: '+e.message; }
        }
        async function downloadAll() {
            const s = document.getElementById('status'); s.className='status info'; s.style.display='block'; s.textContent='‚è≥ –°–∫–∞—á–∏–≤–∞—é –≤—Å–µ –ø–∞—Ä—ã...';
            try { const resp = await fetch('/parser_multi_crypto', { method: 'POST', headers: { 'Content-Type': 'application/json' } }); const r = await resp.json(); s.className = (r.status && r.status.includes('–∑–∞–≤–µ—Ä—à–µ–Ω–æ')) ? 'status success' : 'status error'; s.textContent = (r.status || 'error'); } catch(e){ s.className='status error'; s.textContent='‚ùå –û—à–∏–±–∫–∞: '+e.message; }
        }
        function goHome(){ window.location.href='/'; }
        async function downloadXRP() {
            const s = document.getElementById('status'); s.className='status info'; s.style.display='block'; s.textContent='‚è≥ –°–∫–∞—á–∏–≤–∞—é XRPUSDT...';
            try { const r = await postJSON('/parser_xrp', {}); s.className = r.status ? 'status success' : 'status error'; s.textContent = (r.status || 'error') + ': ' + ((r.results||[]).map(x=>x.message).join(' | ')||''); } catch(e){ s.className='status error'; s.textContent='‚ùå –û—à–∏–±–∫–∞: '+e.message; }
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h1>
        </div>
        <div class="content">
            {% include 'include/_sidebar.html' %}
            <div class="section">
                <h2>–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–≤–µ—á–µ–π</h2>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="downloadBTC()">üìä –°–∫–∞—á–∞—Ç—å —Å–≤–µ—á–∏ BTC</button>
                    <button class="btn btn-primary" onclick="downloadXMR()">üìä –°–∫–∞—á–∞—Ç—å —Å–≤–µ—á–∏ XMR</button>
                    <button class="btn btn-primary" onclick="downloadXRP()">üìä –°–∫–∞—á–∞—Ç—å —Å–≤–µ—á–∏ XRP</button>
                    <button class="btn btn-success" onclick="downloadAll()">üåü –°–∫–∞—á–∞—Ç—å –≤—Å–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã</button>
                </div>
                <div id="status" class="status info"></div>
            </div>
        </div>
    </div>
</body>
</html>


