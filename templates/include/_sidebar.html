<nav class="sidebar">
  <style>
    .sidebar-nav, .sidebar-nav ul { list-style: none; padding: 0; margin: 0; }
    .sidebar-nav li { border-bottom: 1px solid #ddd; }
    .sidebar-nav details > summary { cursor: pointer; padding: 8px; position: relative; list-style: none; }
    .sidebar-nav details > summary::before { content: none !important; }
    .sidebar-nav details > summary::marker { content: none !important; }
    /* –°–∫—Ä—ã—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä–∫–µ—Ä summary –≤ WebKit */
    .sidebar-nav details > summary::-webkit-details-marker { display: none; }
    /* –°–∫—Ä—ã—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä–∫–µ—Ä summary –≤ Mozilla */
    .sidebar-nav details > summary::-moz-list-bullet { display: none; }
    .sidebar-nav details > summary::after {
      content: "‚ñ∂";
      position: absolute;
      right: 8px;
      transition: transform 0.2s;
    }
    .sidebar-nav details[open] > summary::after { transform: rotate(90deg); }
    .sidebar-nav ul.submenu { padding-left: 16px; }
  </style>
  <h3>üìã –ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
  <ul class="sidebar-nav">
    <li><a href="/">üè† –ì–ª–∞–≤–Ω–∞—è</a></li>
    <li>
      <details open>
        <summary>üí∞ –¢–æ—Ä–≥–æ–≤—ã–π –∞–≥–µ–Ω—Ç</summary>
        <ul class="submenu">
          <li><a href="/trading_agent">–ó–∞–ø—É—Å—Ç–∏—Ç—å</a></li>
          <li><a href="/trading_agent">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</a></li>
          <li><a href="/trading/results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ—Ä–≥–æ–≤–ª–∏</a></li>
          <li>
            <details open>
              <summary>–°–∏–º–≤–æ–ª—ã</summary>
              <ul class="submenu" id="sidebarSymbols"></ul>
            </details>
          </li>
        </ul>
      </details>
    </li>
    <li>
      <details>
        <summary>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</summary>
        <ul class="submenu">
          <li><a href="/analitika">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã DQN/SAC</a></li>
          <li><a href="/trade-lab">üß™ Trade Lab</a></li>
        </ul>
      </details>
    </li>
    <li>
      <details>
        <summary>ü§ñ –ú–æ–¥–µ–ª–∏</summary>
        <ul class="submenu">
          <li><a href="/models">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DQN</a></li>
          <li><a href="/cnn_training">–û–±—É—á–µ–Ω–∏–µ CNN</a></li>
          <li><a href="/sac_models">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SAC</a></li>
        </ul>
      </details>
    </li>
    <li><a href="/oos">üìà OOS</a></li>
    <li>
      <details>
        <summary>üì• –î–∞–Ω–Ω—ã–µ</summary>
        <ul class="submenu">
          <li><a href="/data">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</a></li>
          <li><a href="/parser_multi_crypto">–°–∫–∞—á–∞—Ç—å –≤—Å–µ</a></li>
        </ul>
      </details>
    </li>
    <li>
      <details>
        <summary>üîß –°–∏—Å—Ç–µ–º–∞</summary>
        <ul class="submenu">
          <li>
            <details>
              <summary>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</summary>
              <ul class="submenu">
                <li><a href="/settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></li>
                <li><a href="/settings/api">üîë API</a></li>
              </ul>
            </details>
          </li>
          <li><a href="/clean_data">–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</a></li>
          <li><a href="/clear_redis">–û—á–∏—Å—Ç–∏—Ç—å Redis</a></li>
          <li><a href="/task-status/">–°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á</a></li>
        </ul>
      </details>
    </li>
  </ul>
</nav>
<script>
  (function(){
    try{
      const defaults = ['BTCUSDT','ETHUSDT','SOLUSDT','TONUSDT','ADAUSDT','BNBUSDT','XRPUSDT'];
      const ul = document.getElementById('sidebarSymbols');
      if(!ul) return;
      const render = (symbols)=>{
        ul.innerHTML = symbols.map(sym=>`<li><a href="/agent/${sym}">${sym}</a></li>`).join('');
      };
      fetch('/api/trading/status_all').then(r=>r.json()).then(data=>{
        try{
          const agents = Array.isArray(data.active_agents)? data.active_agents : [];
          const set = new Set();
          agents.forEach(a=>{ if(a && a.symbol) set.add(String(a.symbol)); });
          const list = (set.size>0) ? Array.from(set) : defaults;
          render(list);
        }catch(_){ render(defaults); }
      }).catch(()=>render(defaults));
    }catch(_){ }
  })();
</script>
