# –û—Ç—á–µ—Ç –æ–± —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–ë—ã–ª–æ **–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–∏**:
- **Celery** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –∑–∞–ø—É—Å–∫–∞–ª `start_trading_task()`
- **–¢–æ—Ä–≥–æ–≤—ã–π –∞–≥–µ–Ω—Ç** –∏–º–µ–ª —Å–≤–æ–π `_trading_loop()` –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–ª –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

## –†–µ—à–µ–Ω–∏–µ

### ‚úÖ –£–±—Ä–∞–ª–∏ `_trading_loop()`
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –Ω—É–∂–µ–Ω, —Ç–∞–∫ –∫–∞–∫ Celery —É–∂–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å—é

### ‚úÖ –°–æ–∑–¥–∞–ª–∏ `_execute_trading_step()`
**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
- –í—ã–ø–æ–ª–Ω—è–µ—Ç **–æ–¥–∏–Ω —Ç–æ—Ä–≥–æ–≤—ã–π —à–∞–≥** –∑–∞ —Ä–∞–∑
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ Celery
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### ‚úÖ –û–±–Ω–æ–≤–∏–ª–∏ `start_trading()`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±—Ä–∞–ª–∏ –∑–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
- –£–±—Ä–∞–ª–∏ `self.is_trading` —Ñ–ª–∞–≥
- –¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–∏–Ω —à–∞–≥ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### üîÑ Celery (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
```python
celery.conf.beat_schedule = {
    'start-trading-every-5-minutes': {
        'task': 'tasks.celery_tasks.start_trading_task',
        'schedule': crontab(minute='*/5'),
        'args': (['BTC/USDT'], '/workspace/good_models/dqn_model_E750.pth')
    }
}
```

### üéØ –¢–æ—Ä–≥–æ–≤—ã–π –∞–≥–µ–Ω—Ç (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
```python
def start_trading(self, symbols: list) -> Dict:
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —à–∞–≥–∞
    result = self._execute_trading_step()
    return {"success": True, "trading_result": result}
```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —à–∞–≥–∞
```python
{
    "timestamp": "2025-01-01T12:00:00",
    "symbol": "BTC/USDT",
    "price": 45000.00,
    "action": "buy",
    "trade_amount": 0.002500,
    "position": {...},
    "trade_executed": "buy",
    "trade_details": {...}
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–∏
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Ü–∏–∫–ª–∞–º–∏
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –õ—É—á—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- Celery —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å—é
- –ê–≥–µ–Ω—Ç —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–µ
- –õ–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å

### ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –ø–æ—Ç–æ–∫–æ–≤
- –ú–µ–Ω—å—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
- –ö–∞–∂–¥—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —à–∞–≥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –õ–µ–≥—á–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –õ—É—á—à–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã

### –†–∞–Ω—å—à–µ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ):
```
INFO: –¢–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª –∑–∞–ø—É—â–µ–Ω
INFO: –¶–µ–Ω–∞ BTC/USDT: $45000.00, –î–µ–π—Å—Ç–≤–∏–µ: buy
INFO: üü¢ –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–∫—É–ø–∫—É 0.002500 BTC
INFO: –¶–µ–Ω–∞ BTC/USDT: $45000.00, –î–µ–π—Å—Ç–≤–∏–µ: buy  # –ü–æ–≤—Ç–æ—Ä!
```

### –¢–µ–ø–µ—Ä—å (–æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫):
```
INFO: –¢–æ—Ä–≥–æ–≤–ª—è –∑–∞–ø—É—â–µ–Ω–∞ –¥–ª—è ['BTC/USDT']
INFO: –¶–µ–Ω–∞ BTC/USDT: $45000.00, –î–µ–π—Å—Ç–≤–∏–µ: buy
INFO: üü¢ –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–∫—É–ø–∫—É 0.002500 BTC
INFO: –¢–æ—Ä–≥–æ–≤—ã–π —à–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω –¥–ª—è ['BTC/USDT']
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
1. ‚úÖ Celery –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ—Ä–≥–æ–≤—É—é –∑–∞–¥–∞—á—É
2. ‚úÖ –ê–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–∏–Ω —Ç–æ—Ä–≥–æ–≤—ã–π —à–∞–≥
3. ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ! üöÄ
