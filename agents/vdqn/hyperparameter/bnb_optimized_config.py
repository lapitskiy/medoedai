"""
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è BNB (–ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –ø—Ä–æ–≥–æ–Ω–∞ cf09)

–¶–µ–ª–∏:
- –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ–ª—é —ç–ø–∏–∑–æ–¥–æ–≤ —Å–æ —Å–¥–µ–ª–∫–∞–º–∏ (episodes_with_trade_ratio ~ 7.25% ‚Üí 15‚Äì25%)
- –ü–æ–≤—ã—Å–∏—Ç—å winrate –∏ –∏—Ç–æ–≥–æ–≤—ã–π PnL —á–µ—Ä–µ–∑ —Å–º—è–≥—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –≤—ã—Ö–æ–¥–æ–≤
"""

BNB_OPTIMIZED_CONFIG = {
    # –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ —Ñ–∏–ª—å—Ç—Ä—ã
    'risk_management': {
        'STOP_LOSS_PCT': -0.035,   # –±—ã–ª–æ -0.045 ‚Üí –≥–∏–±—á–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ, –Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º —Ä–∏—Å–∫
        'TAKE_PROFIT_PCT': 0.06,   # –±—ã–ª–æ 0.07 ‚Üí –±—ã—Å—Ç—Ä–µ–µ —Ñ–∏–∫—Å–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏—Ç–∞
        'min_hold_steps': 8,       # –±—ã–ª–æ 18 (‚âà90 –º–∏–Ω) ‚Üí 8 (‚âà40 –º–∏–Ω)
        'volume_threshold': 0.0011 # –±—ã–ª–æ ~0.00162 ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –±–æ–ª—å—à–µ –≤—Ö–æ–¥–æ–≤
    },

    # –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
    'position_sizing': {
        'base_position_fraction': 0.30,
        'position_fraction': 0.30,
        'position_confidence_threshold': 0.58  # –±—ã–ª–æ 0.7 ‚Üí —á–∞—â–µ –±—Ä–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã
    },

    # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏, –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –ø–æ–∑–∂–µ)
    'indicators_config': {
        'rsi': {'length': 14},
        'ema': {'lengths': [100, 200]},
        'ema_cross': {'pairs': [(100, 200)], 'include_cross_signal': True},
        'sma': {'length': 14},
    },

    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è
    'training_params': {
        'use_noisy_networks': True,
        'eps_start': 0.10,            # –º–µ–Ω—å—à–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –ø—Ä–∏ NoisyNet
        'eps_final': 0.02,
        'eps_decay_steps': 2_000_000,

        'memory_size': 1_000_000,     # –±–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –æ–ø—ã—Ç–∞
        'batch_size': 256,
        'train_repeats': 2,           # –±–æ–ª—å—à–µ —à–∞–≥–æ–≤ –æ–±—É—á–µ–Ω–∏—è –Ω–∞ —à–∞–≥ —Å—Ä–µ–¥—ã

        'lr': 1e-4,                   # AdamW –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ, –Ω–æ –ø–æ–ª–µ lr –∑–¥–µ—Å—å
        'gamma': 0.99,

        'soft_tau': 0.005,
        'soft_update_every': 1,
        'target_update_freq': 5000,   # –æ—Å—Ç–∞–≤–∏–º, –Ω–æ –≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —á–∏—Å—Ç—ã–π soft

        'dropout_rate': 0.0,          # –æ—Ç–∫–ª—é—á–∞–µ–º dropout –¥–ª—è DQN
        'layer_norm': True,

        'use_distributional_rl': True,
        'n_atoms': 51,
        'v_min': -0.2,
        'v_max': 0.2,
    },

    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ä–µ–¥—ã
    'gym_config': {
        'lookback_window': 100,
        'step_minutes': 5,
        'funding_features': {'included': True},
    },
}

if __name__ == "__main__":
    import pprint
    print("üîß –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è BNB")
    pprint.pprint(BNB_OPTIMIZED_CONFIG)


