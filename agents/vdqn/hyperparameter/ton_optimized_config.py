# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è TON
# –ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑–∞–ª –Ω–∏–∑–∫–∏–π winrate (45.7%) –∏ –º–Ω–æ–≥–æ —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ (53.9%)

TON_OPTIMIZED_CONFIG = {
    # –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞
    'risk_management': {
        'STOP_LOSS_PCT': -0.02,  
        'TAKE_PROFIT_PCT': 0.03,  # –°–Ω–∏–∂–∞–µ–º —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç —Å 6% –¥–æ 4%
        'min_hold_steps': 0,     # –£–º–µ–Ω—å—à–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è —Å 30 –¥–æ 20 (1.7 —á–∞—Å–∞)
        'volume_threshold': 0.003, # –°–º—è–≥—á–∞–µ–º –ø–æ—Ä–æ–≥ –æ–±—ä–µ–º–∞ –¥–ª—è –±–æ–ª—å—à–µ–≥–æ —á–∏—Å–ª–∞ –≤—Ö–æ–¥–æ–≤
    },
    
    # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    'position_sizing': {
        'base_position_fraction': 0.2,  # –°–Ω–∏–∂–∞–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å 0.3 –¥–æ 0.2
        'position_fraction': 0.2,
        'position_confidence_threshold': 0.8,  # –ü–æ–≤—ã—à–∞–µ–º –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å 0.7 –¥–æ 0.8
    },
    
    # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
    'indicators_config': {
        'rsi': {'length': 21},  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–µ—Ä–∏–æ–¥ RSI —Å 14 –¥–æ 21 –¥–ª—è –º–µ–Ω–µ–µ —à—É–º–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
        'ema': {'lengths': [50, 100, 200]},  # –î–æ–±–∞–≤–ª—è–µ–º EMA 50 –¥–ª—è –ª—É—á—à–µ–≥–æ —Ç—Ä–µ–Ω–¥–∞
        'ema_cross': {
            'pairs': [(50, 100), (100, 200)],  # –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ 50/100
            'include_cross_signal': True
        },
        'sma': {'length': 21},  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–µ—Ä–∏–æ–¥ SMA —Å 14 –¥–æ 21
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
        'bb': {'length': 20, 'std': 2},  # Bollinger Bands –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
        'macd': {'fast': 12, 'slow': 26, 'signal': 9},  # MACD –¥–ª—è —Ç—Ä–µ–Ω–¥–∞
    },
    
    # –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è
    # NOTE: GPU-owned –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (batch_size/memory_size/train_repeats/use_amp/use_gpu_storage/use_torch_compile)
    # –ù–ï –¥–æ–ª–∂–Ω—ã –∑–∞–¥–∞–≤–∞—Ç—å—Å—è per-symbol. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≥–æ–Ω—ã –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏ –∏ –ª–æ–º–∞–µ—Ç hardware-–ø—Ä–æ—Ñ–∏–ª—å.
    'training_params': {
        'eps_start': 0.995,  # –°–Ω–∏–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —ç–∫—Å–ø–ª–æ—Ä–∞—Ü–∏—é —Å 1.0 –¥–æ 0.8
        'eps_final': 0.02,  # –°–Ω–∏–∂–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é —ç–∫—Å–ø–ª–æ—Ä–∞—Ü–∏—é —Å 0.05 –¥–æ 0.02
        'eps_decay_steps': 1500000,  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤—Ä–µ–º—è –∑–∞—Ç—É—Ö–∞–Ω–∏—è —ç–∫—Å–ø–ª–æ—Ä–∞—Ü–∏–∏
        'lr': 0.0005,  # –°–Ω–∏–∂–∞–µ–º learning rate —Å 0.001 –¥–æ 0.0005
        'gamma': 0.995,  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º gamma —Å 0.99 –¥–æ 0.995 –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        'hidden_sizes': (1024, 512, 256),  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Å–µ—Ç–∏
        'dropout_rate': 0.3,  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º dropout —Å 0.2 –¥–æ 0.3 –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏
        'soft_update_every': 40,
        'target_update_freq': 800,
        'early_stopping_patience': 2000,  # –£–º–µ–Ω—å—à–∞–µ–º —Ç–µ—Ä–ø–µ–Ω–∏–µ —Å 3000 –¥–æ 2000
        'min_episodes_before_stopping': 1500,  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–∏–Ω–∏–º—É–º —ç–ø–∏–∑–æ–¥–æ–≤ —Å 1000 –¥–æ 1500
    },
    
    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ä–µ–¥—ã
    'gym_config': {
        'lookback_window': 100,  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ–∫–Ω–æ –∏—Å—Ç–æ—Ä–∏–∏ —Å 20 –¥–æ 30
        'step_minutes': 5,
        'funding_features': {
            'included': True,
            'weight': 0.1  # –î–æ–±–∞–≤–ª—è–µ–º –≤–µ—Å –¥–ª—è funding rate
        }
    }
}

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è TON
TON_RECOMMENDATIONS = {
    'market_analysis': {
        'ton_volatility': 'TON –∏–º–µ–µ—Ç –≤—ã—Å–æ–∫—É—é –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω—ã –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',
        'funding_rate_impact': 'TON —á–∞—Å—Ç–æ –∏–º–µ–µ—Ç –≤—ã—Å–æ–∫–∏–µ funding rates, —É—á–∏—Ç—ã–≤–∞–µ–º —ç—Ç–æ –≤ –º–æ–¥–µ–ª–∏',
        'volume_patterns': 'TON –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±—ä–µ–º–∞, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ä–æ–≥'
    },
    
    'optimization_strategy': {
        'step_1': '–°–Ω–∞—á–∞–ª–∞ –æ–±—É—á–∏—Ç–µ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–∏—Å–∫–∞',
        'step_2': '–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ',
        'step_3': '–î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –µ—Å–ª–∏ winrate < 55%',
        'step_4': '–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ensemble –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π'
    },
    
    'expected_improvements': {
        'winrate_target': '55-65% (–≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–∏—Ö 45.7%)',
        'pl_ratio_target': '1.3-1.5 (–≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–∏—Ö 1.095)',
        'bad_trades_target': '<40% (–≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–∏—Ö 53.9%)',
        'avg_roi_target': '>0.002 (–≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–∏—Ö -0.0007)'
    }
}

if __name__ == "__main__":
    print("üîß –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è TON")
    print("=" * 50)
    print(f"üéØ –¶–µ–ª–µ–≤–æ–π winrate: {TON_RECOMMENDATIONS['expected_improvements']['winrate_target']}")
    print(f"üí∞ –¶–µ–ª–µ–≤–æ–π P&L ratio: {TON_RECOMMENDATIONS['expected_improvements']['pl_ratio_target']}")
    print(f"üìâ –¶–µ–ª–µ–≤—ã–µ –ø–ª–æ—Ö–∏–µ —Å–¥–µ–ª–∫–∏: {TON_RECOMMENDATIONS['expected_improvements']['bad_trades_target']}")
    print(f"üìà –¶–µ–ª–µ–≤–æ–π ROI: {TON_RECOMMENDATIONS['expected_improvements']['avg_roi_target']}")
    print("\nüîß –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:")
    print("‚Ä¢ STOP_LOSS: -4% ‚Üí -2.5%")
    print("‚Ä¢ TAKE_PROFIT: +6% ‚Üí +4%")
    print("‚Ä¢ min_hold_steps: 30 ‚Üí 20")
    print("‚Ä¢ position_fraction: 0.3 ‚Üí 0.2")
    print("‚Ä¢ confidence_threshold: 0.7 ‚Üí 0.8")
    print("‚Ä¢ learning_rate: 0.001 ‚Üí 0.0005")
    print("‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: BB, MACD")
    print("‚Ä¢ –£–≤–µ–ª–∏—á–µ–Ω lookback_window: 20 ‚Üí 30")
